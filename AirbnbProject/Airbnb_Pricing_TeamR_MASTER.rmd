---
title: "Airbnb Pricing Tool"
author: "Team R"
date: "31 Januar 2018"
output:
  html_document:
    css: ../AnalyticsStyles/default.css
    theme: paper
    toc: yes
    toc_float:
      collapsed: no
      smooth_scroll: yes
  pdf_document:
    includes:
      in_header: ../AnalyticsStyles/default.sty
always_allow_html: yes
---

<!-- rmarkdown::render("AirbnbProject/Airbnb_Pricing_TeamR_MASTER.rmd") -->

```{r echo=FALSE, message=FALSE}
make_pdf_file = 0 # SET THIS TO 1 IF WE COMPILE PDF FILE, 0 OTHERWISE (FOR HTML)

source("../AnalyticsLibraries/library.R")
source("../AnalyticsLibraries/heatmapOutput.R")

# Package options
ggthemr('fresh')  # ggplot theme
opts_knit$set(progress=FALSE, verbose=FALSE)
opts_chunk$set(echo=FALSE, fig.align="center", fig.width=10, fig.height=6.2)
options(knitr.kable.NA = '')
```

```{r echo=FALSE, message=FALSE}
# Please ENTER the filename
datafile_name = "Data/tomslee_airbnb_amsterdam_1476_2017-07-22.csv"
PricingData <- read.csv(datafile_name, stringsAsFactors = TRUE)
# We turn the data into data.matrix class so that we can easier manipulate it
#PricingData <- data.matrix(PricingData)

# Please ENTER the dependent variable.
dependent_variable = 14 # i.e Price

# Please ENTER the attributes to use as independent variables. 
independent_variables = c(1:13,18:19) # use all the available attributes

max_data_report = 10
```

# The Business Context
Airbnb was founded in 2008 by *Brian Chesky*, *Joe Gebbia*, and *Nathan Blecharczyk* as *AirBed & Breakfast*, an online marketplace and hospitality service for short-term lodging. Over the past years, the share of professional hospitality providers has significantly increased and is now *crowding out* the private providers, threatening Airbnb's value proposition of *unique design and personal touch*. Within this context, the marketing department wants to run a campaign to attract more private providers. To do this, they requested the analytics department to create a tool that helps interested landlords to understand how much money they could earn with their respective apartment. 

As a pilot, Amsterdam was chosen because of the "Airbnb friendly" policy of the local regulators and the high number of short-term visitors. The proposed solution, however, is designed to be city-independent and therefore, an easily replicable process was designed, using *.rmd-Files* and *Github*.


<hr>\clearpage

# The Data
(Data source: http://tomslee.net/airbnb-data-collection-get-the-data. We acknowledge the following: All material is copyright Tom Slee, licensed under a Creative Commons Attribution-NonCommercial 2.5 Canada License.)

The data is collected from the official Airbnb website

The credit card issuer has gathered information on `r nrow(PricingData)` customers. The dataset contains information on `r length(independent_variables)` variables, including demographic factors, credit data, history of payment, and bill statements of credit card customers from April 2005 to September 2005, as well as information on the outcome: did the customer default or not?

Name                       | Description
:--------------------------|:--------------------------------------------------------------------
room_id                    | A unique number identifying an Airbnb listing. The listing has a URL on the Airbnb web site of http://airbnb.com/rooms/room_id
host_id                    | A unique number identifying an Airbnb host. The host’s page has a URL on the Airbnb web site of http://airbnb.com/users/show/host_id
room_type                  | One of “Entire home/apt” 1), “Private room” (2), or “Shared room” (3)
neighborhood               | a subregion of the city or search area for which the survey is carried out. For cities that have both, a neighbourhood is smaller than a borough. For some cities there is no neighbourhood information (**TBD** 1=graduate school, 2=university, 3=high school, 4=others, 5=unknown, 6=unknown)
reviews                    | he number of reviews that a listing has received. Airbnb has said that 70% of visits end up with a review, so the number of reviews can be used to estimate the number of visits. Note that such an estimate will not be reliable for an individual listing (especially as reviews occasionally vanish from the site), but over a city as a whole it should be a useful metric of traffic
overall_satisfaction       | The average rating (out of five) that the listing has received from those visitors who left a review
accommodates               | The number of guests a listing can accommodate
bedrooms                   | The number of bedrooms a listing offers
minstay                    | The minimum stay for a visit, as posted by the host
latitude and longitude     | The latitude and longitude of the listing as posted on the Airbnb site: this may be off by a few hundred metres. I do not have a way to track individual listing locations with
last_modified              | The date and time that the values were read from the Airbnb web site
price                      | The price (in $US) for a night stay. In early surveys, there may be some values that were recorded by month 




Let's look into the data for a few customers. This is how the first `r min(max_data_report, nrow(PricingData))` out of the total of `r nrow(PricingData)` rows look like (transposed, for convenience):

```{r echo=FALSE, message=FALSE, prompt=FALSE, results='asis'}
knitr::kable({
#  df <- t(head(round(PricingData[,independent_variables],2), max_data_report))
  df <- t(head(PricingData[,independent_variables], max_data_report))
  colnames(df) <- sprintf("%02d", 1:ncol(df))
  df
})
```
